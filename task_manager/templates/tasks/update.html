{% extends "base/index.html" %}
{% load static %}
{% load django_bootstrap5 %}
{% block title %} Редактирование поздадачи {{ subtask.name }} {% endblock %}
{% block content %}
  <div class="col d-flex justify-content-center">
    <div class="card" style="width: 40rem; height: max-content;">
      {% if "subtask" in request.path %}
        <div class="card-header">Редактирование подзадачи:
          <b>{{ object.name|safe }}</b></div>
      {% else %}
        <div class="card-header">Редактирование задачи:
          <b>{{ object.name|safe }}</b></div>
      {% endif %}
      <div class="card-body">
        <form method="post" enctype="multipart/form-data"
              class="form-container">
          {% csrf_token %}
          <div class="task-form">
          {% bootstrap_form form %}
            </div>
          <br>
          {% for formset_form in formset.forms %}
            <div class="subtask-form">
              {% bootstrap_form formset_form %}
            </div>
          {% endfor %}
          <br>
          <div id="button-container">
            {% bootstrap_button button_type="submit" content="Отправить" %}
          </div>
          {{ formset.management_form }}
        </form>
      </div>
    </div>
  </div>
{% endblock %}
{% block scripts %}
  <script src="{% static 'js/jquery.formset.js' %}"></script>
  <script type="text/javascript">
      $(function () {
          $('.subtask-form').formset({
              prefix: '{{ formset_form.prefix }}'
          });
      })
  </script>
{% endblock scripts %}
